{% extends 'base.html.twig' %}

{% block title %}Approvisionner une caisse{% endblock %}

{% block body %}
    <div class="container-fluid">
        {{ form_start(form, {'attr': {'id': 'appro-caisse-form'}}) }}
{#        <div class="card card-fluid">#}
{#            <div class="card-header bg-soft-custom">#}
{#                <h6>Approvisionner une caisse</h6>#}
{#            </div>#}
{#            <div class="card-body">#}
{#                {{ include('ApproCaisse/_form.html.twig') }}#}
{#            </div>#}
{#            <div class="card-footer d-flex flex-column flex-md-row justify-content-end">#}

{#                <!-- Bouton pour afficher le modal -->#}

{#                <a href="{{ path('app_approcaisse_index') }}" class="btn btn-info mb-2 mb-md-0 mr-md-2">#}
{#                    <i class="oi oi-home"></i> Retour#}
{#                </a>#}
{#                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalValidation">#}
{#                    Enregistrer#}
{#                </button>#}
{#            </div>#}
{#        </div>#}

        <div class="card card-fluid">
            <div class="card-header bg-soft-custom">
                <h6>Approvisionner une caisse</h6>
            </div>
            <div class="card-body">
                {{ include('ApproCaisse/_form.html.twig') }}
            </div>
            <div class="card-footer">
                <div class="card-footer-content">
                    <button type="button" class="btn btn-primary float-right ml-2" data-toggle="modal" data-target="#modalValidation">Enregistrer</button>
                    <a href="{{ path('app_approcaisse_index') }}" class="btn btn-info float-right"><i class="oi oi-home"></i> Retour</a>
                </div>
            </div>
        </div>

        {{ form_end(form) }}
    </div>

    <!-- Modal de confirmation -->
    <!-- Modal de confirmation -->
    <div id="modalValidation" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modalValidationLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-warning">
                    <h5 class="modal-title text-dark" id="modalValidationLabel">
                        <span class="uil uil-question-circle"></span>
                        Confirmation de décaissement {{ approCaisse.reference }}
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body font-size-14">
                    Voulez-vous approvisionner une autre caisse ?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger font-weight-medium" data-dismiss="modal">Annuler</button>
                    <!-- Remplacer par un vrai bouton submit -->
                    <button type="submit" class="btn btn-success font-weight-medium" form="appro-caisse-form">
                        Confirmer
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('confirm-button').addEventListener('click', function () {
            // Soumettre le formulaire après confirmation
            document.getElementById('appro-caisse-form').submit();
        });
    </script>

{% endblock %}
